---
title: "OBIS Taxa Testing"
author: "Sebastian DiGeronimo"
date: "3/23/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library("readxl")
library("obistools")
library("worrms")

```

```{r}
dir <- getwd()
func <- paste0(getwd(),"/../scripts/match_taxa_fix.R")
file.name <- paste0(getwd(),"/../data/raw/TaxonMatch_RcodeTest.xlsx")
# will need to change source location of match_taxa_fix.R
source(func)

# will need to change location of test file TaxonMatch_RcodeTest.xlsx
TaxonMatch_RcodeTest <- readxl::read_excel(file.name)

taxa.name <- TaxonMatch_RcodeTest$scientificName

rm(dir, func)
```


```{r}
# orignal uses
obis.taxa <- obistools::match_taxa(taxa.name , ask = T)
obis.taxa
```
From the original use, the matches that did not have anything were left blank. 
Using the new function allows the correction of these without having to change
the names within the excel spreadsheet before trying again.


```{r}
# updated use
obis.new.taxa <- match_taxa_fix(taxa.name, fuzzy = TRUE, ask = T)

obis.taxa
obis.new.taxa
```


